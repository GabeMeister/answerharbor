{% extends 'base.html' %}

{% block head_scripts %}
{% endblock %}


{% block content %}
    <div id="app">
        <form method="post" action="{{ url_for('edit_post', post_id=post.id, homework_id=homework_id) }}">
            <span id="post-id" style="display: none;">{{post.id}}</span>
            <h1>Edit Post:</h1>

            <h3>Question:</h3>
            <div class="question-wrapper">
                <div class="row">
                    <!-- HACK: To make the input line up with the solution steps -->
                    <div class="delete-btn-wrapper"></div>
                    <div class="input-wrapper">
                        <textarea v-validate="'required'" :name="question.inputNameID" class="input-text-area form-control" rows="8" v-model="question.text" @keyup="update(question)"></textarea>
                        <span class="text-muted" v-show="errors.has(question.inputNameID)" v-text="errors.first(question.inputNameID)"></span>
                    </div>
                     <div class="preview-wrapper">
                        <p :id="question.bufferID" v-text="question.text" class="hidden-buffer"></p>
                        <p class="preview" :id="question.previewID" v-html="question.html"></p>
                    </div>
                </div>
            </div>

            <div class="answer-separator edit-post-space"></div>

            <h3>Solution:</h3>
            <div>
                <div class="row step-chunk" v-for="step in stepGroup.steps">
                    <div class="delete-btn-wrapper">
                        <img @click="deleteStep(step)" class="x-btn" src="/static/img/x-btn.png"/>
                    </div>
                    <div class="input-wrapper">
                        <div class="input-area">
                            <textarea class="input-text-area form-control" rows="8" v-validate="'required'" :name="step.inputNameID" v-model="step.text" @keyup="update(step)"></textarea>
                            <span class="text-muted" v-show="errors.has(step.inputNameID)" v-text="errors.first(step.inputNameID)"></span>
                        </div>
                    </div>
                    <div class="preview-wrapper">
                        <p :id="step.bufferID" v-text="step.text" class="hidden-buffer"></p>
                        <p class="preview" :id="step.previewID" v-html="step.html"></p>
                    </div>
                </div><br/>

                <button class="btn btn-default" type="button" @click="addNewStep">New Step</button>
            </div>
            <br/>
            <br/>
            <input class="btn btn-primary" @click="validateBeforeSubmit($event)" type='submit' value='Submit Post'/>
        </form>
    </div>



{% endblock %}

{% block body_scripts %}
    <script type="text/javascript" src="/static/js/vue/edit_post_app.js"></script>
{% endblock %}
